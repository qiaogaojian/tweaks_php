# 增删改查

## 连接数据库

```sh
Michael@Michael-PC MINGW64 /d/xampp/htdocs (master)
$ mysql -h localhost -u root -p
Enter password: ****
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 19
Server version: 5.5.47 MySQL Community Server (GPL)

Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.
```

## 进入相应数据库查看表

```sh
mysql> use test
Database changed
mysql> show tables;
+----------------+
| Tables_in_test |
+----------------+
| a              |
| b              |
| boy            |
| category       |
| girl           |
| goods          |
| m              |
| mian           |
| result         |
| t              |
| user           |
+----------------+
11 rows in set (0.00 sec)
```

## 查询表中数据

```sh
mysql> select * form user;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'form
user' at line 1
mysql> select * from user;
+-----+--------+-----+
| uid | name   | age |
+-----+--------+-----+
|   1 | 乔高建 |  25 |
+-----+--------+-----+
1 row in set (0.00 sec)
```

## 插入数据

```sh
mysql> insert into user (uid,name) values (2,Michael);
ERROR 1054 (42S22): Unknown column 'Michael' in 'field list'
mysql> insert into user (uid,name) values (2,"Michael");
Query OK, 1 row affected (0.00 sec)
```

## 查看表结构

```sh
mysql> desc user
    -> ;
+-------+----------------------+------+-----+---------+----------------+
| Field | Type                 | Null | Key | Default | Extra          |
+-------+----------------------+------+-----+---------+----------------+
| uid   | int(11)              | NO   | PRI | NULL    | auto_increment |
| name  | varchar(20)          | NO   |     |         |                |
| age   | smallint(5) unsigned | NO   |     | 0       |                |
+-------+----------------------+------+-----+---------+----------------+
3 rows in set (0.02 sec)

mysql> insert into user values (3,"Michelle",26);
Query OK, 1 row affected (0.00 sec)

mysql> select * from user
    -> ;
+-----+----------+-----+
| uid | name     | age |
+-----+----------+-----+
|   1 | 乔高建   |  25 |
|   2 | Michael  |   0 |
|   3 | Michelle |  26 |
+-----+----------+-----+
3 rows in set (0.00 sec)
```

## 更改数据表数据

```sh
mysql> update user set age=18 where name="Michael";
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from user;
+-----+----------+-----+
| uid | name     | age |
+-----+----------+-----+
|   1 | 乔高建   |  25 |
|   2 | Michael  |  18 |
|   3 | Michelle |  26 |
+-----+----------+-----+
3 rows in set (0.00 sec)

mysql> update user
    -> set
    -> age = 9
    -> name = "nobody"
    -> where uid = 2;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'name
= "nobody"
where uid = 2' at line 4
mysql> update user set age=19 name="迈克尔" where uid=2;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'name="迈克尔" where uid=2' at line 1
mysql> update user set name="迈克尔",age=19 where uid=2;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from user;
+-----+----------+-----+
| uid | name     | age |
+-----+----------+-----+
|   1 | 乔高建   |  25 |
|   2 | 迈克尔   |  19 |
|   3 | Michelle |  26 |
+-----+----------+-----+
3 rows in set (0.00 sec)

mysql> update user set name="迈克尔" age=19 where uid=2;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'age=19 where uid=2' at line 1
mysql> update user set name="迈克尔",age=19 where uid=2;
Query OK, 0 rows affected (0.00 sec)
Rows matched: 1  Changed: 0  Warnings: 0

mysql> select * from user;
+-----+----------+-----+
| uid | name     | age |
+-----+----------+-----+
|   1 | 乔高建   |  25 |
|   2 | 迈克尔   |  19 |
|   3 | Michelle |  26 |
+-----+----------+-----+
3 rows in set (0.00 sec)
```

## 删除数据表数据

```sh
mysql> delete from user where uid=3;
Query OK, 1 row affected (0.00 sec)

mysql> select * from user;
+-----+--------+-----+
| uid | name   | age |
+-----+--------+-----+
|   1 | 乔高建 |  25 |
|   2 | 迈克尔 |  19 |
+-----+--------+-----+
2 rows in set (0.00 sec)
```

## 插入多行数据

```sh
mysql> insert into user values
    -> (1,"张三",20),
    -> (2,"李四",21),
    -> (3,"王五",22)
    -> ;
ERROR 1062 (23000): Duplicate entry '1' for key 'PRIMARY'
mysql> insert into user values
    ->     -> (1,"张三",20),
    ->     -> (2,"李四",21),
    ->     -> (3,"王五",22)
    ->
    -> ;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-> (1,"张三",20),
    -> (2,"李四",21),
    -> (3,"王五",22)' at line 2
mysql> insert into user values
    -> (3,"张三",20),
    -> (4,"李四",21),
    -> (5,"王五",22)
    -> ;
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> select * from user;
+-----+--------+-----+
| uid | name   | age |
+-----+--------+-----+
|   1 | 乔高建 |  25 |
|   2 | 迈克尔 |  19 |
|   3 | 张三   |  20 |
|   4 | 李四   |  21 |
|   5 | 王五   |  22 |
+-----+--------+-----+
5 rows in set (0.00 sec)

mysql> select uid name from user where uid>=3;
+------+
| name |
+------+
|    3 |
|    4 |
|    5 |
+------+
3 rows in set (0.00 sec)
```

## 多条件查询数据

```sh
mysql>  select uid,name from user where uid>=3;
+-----+------+
| uid | name |
+-----+------+
|   3 | 张三 |
|   4 | 李四 |
|   5 | 王五 |
+-----+------+
3 rows in set (0.00 sec)
```

## 查询模型

```sh
$ mysql -h 127.0.0.1 -u root -p
Enter password: ****
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
Server version: 5.5.47 MySQL Community Server (GPL)

Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| client             |
| messageboard       |
| my_db              |
| mysql              |
| performance_schema |
| test               |
| unitypackage       |
+--------------------+
8 rows in set (0.01 sec)

mysql> use test;
Database changed
mysql> show tables;
+----------------+
| Tables_in_test |
+----------------+
| a              |
| b              |
| boy            |
| category       |
| girl           |
| goods          |
| m              |
| mian           |
| result         |
| t              |
| user           |
+----------------+
11 rows in set (0.00 sec)

mysql> select * from user;
+-----+--------+-----+
| uid | name   | age |
+-----+--------+-----+
|   1 | 乔高建 |  25 |
|   2 | 迈克尔 |  19 |
|   3 | 张三   |  20 |
|   4 | 李四   |  21 |
|   5 | 王五   |  22 |
+-----+--------+-----+
5 rows in set (0.00 sec)

mysql> select name,age from user where uid=1;
+--------+-----+
| name   | age |
+--------+-----+
| 乔高建 |  25 |
+--------+-----+
1 row in set (0.00 sec)

mysql> select * from user where 1;
+-----+--------+-----+
| uid | name   | age |
+-----+--------+-----+
|   1 | 乔高建 |  25 |
|   2 | 迈克尔 |  19 |
|   3 | 张三   |  20 |
|   4 | 李四   |  21 |
|   5 | 王五   |  22 |
+-----+--------+-----+
5 rows in set (0.00 sec)

mysql> select uid,name,age+1 from user where uid>=3;
+-----+------+-------+
| uid | name | age+1 |
+-----+------+-------+
|   3 | 张三 |    21 |
|   4 | 李四 |    22 |
|   5 | 王五 |    23 |
+-----+------+-------+
3 rows in set (0.00 sec)

mysql> show tables;
+----------------+
| Tables_in_test |
+----------------+
| a              |
| b              |
| boy            |
| category       |
| girl           |
| goods          |
| m              |
| mian           |
| result         |
| t              |
| user           |
+----------------+
11 rows in set (0.00 sec)

mysql> select * from goods;
+----------+------------------------------+--------+----------+-----------+--------------+------------+--------------+-------------+
| goods_id | goods_name                   | cat_id | brand_id | goods_sn  | goods_number | shop_price | market_price | click_count |
+----------+------------------------------+--------+----------+-----------+--------------+------------+--------------+-------------+
|        1 | kd876                        |      4 |        8 | ecs000000 |            1 |    1388.00 |      1665.60 |           9 |
|        4 | 诺基亚n85原装充电器          |      8 |        1 | ecs000004 |           17 |      58.00 |        69.60 |           0 |
|        3 | 诺基亚原装5800耳机           |      8 |        1 | ecs000002 |           24 |      68.00 |        81.60 |           3 |
|        5 | 索爱原装m2卡读卡器           |     11 |        7 | ecs000005 |            8 |      20.00 |        24.00 |           3 |
|        6 | 胜创kingmax内存卡            |     11 |        0 | ecs000006 |           15 |      42.00 |        50.40 |           0 |
|        7 | 诺基亚n85原装立体声耳机hs-82 |      8 |        1 | ecs000007 |           20 |     100.00 |       120.00 |           0 |
|        8 | 飞利浦9@9v                   |      3 |        4 | ecs000008 |            1 |     399.00 |       478.79 |          10 |
|        9 | 诺基亚e66                    |      3 |        1 | ecs000009 |            4 |    2298.00 |      2757.60 |          20 |
|       10 | 索爱c702c                    |      3 |        7 | ecs000010 |            7 |    1328.00 |      1593.60 |          11 |
|       11 | 索爱c702c                    |      3 |        7 | ecs000011 |            1 |    1300.00 |         0.00 |           0 |
|       12 | 摩托罗拉a810                 |      3 |        2 | ecs000012 |            8 |     983.00 |      1179.60 |          13 |
|       13 | 诺基亚5320 xpressmusic       |      3 |        1 | ecs000013 |            8 |    1311.00 |      1573.20 |          13 |
|       14 | 诺基亚5800xm                 |      4 |        1 | ecs000014 |            1 |    2625.00 |      3150.00 |           6 |
|       15 | 摩托罗拉a810                 |      3 |        2 | ecs000015 |            3 |     788.00 |       945.60 |           8 |
|       16 | 恒基伟业g101                 |      2 |       11 | ecs000016 |            0 |     823.33 |       988.00 |           3 |
|       17 | 夏新n7                       |      3 |        5 | ecs000017 |            1 |    2300.00 |      2760.00 |           2 |
|       18 | 夏新t5                       |      4 |        5 | ecs000018 |            1 |    2878.00 |      3453.60 |           0 |
|       19 | 三星sgh-f258                 |      3 |        6 | ecs000019 |           12 |     858.00 |      1029.60 |           7 |
|       20 | 三星bc01                     |      3 |        6 | ecs000020 |           12 |     280.00 |       336.00 |          14 |
|       21 | 金立 a30                     |      3 |       10 | ecs000021 |           40 |    2000.00 |      2400.00 |           4 |
|       22 | 多普达touch hd               |      3 |        3 | ecs000022 |            1 |    5999.00 |      7198.80 |          16 |
|       23 | 诺基亚n96                    |      5 |        1 | ecs000023 |            8 |    3700.00 |      4440.00 |          17 |
|       24 | p806                         |      3 |        9 | ecs000024 |          100 |    2000.00 |      2400.00 |          35 |
|       25 | 小灵通/固话50元充值卡        |     13 |        0 | ecs000025 |            2 |      48.00 |        57.59 |           0 |
|       26 | 小灵通/固话20元充值卡        |     13 |        0 | ecs000026 |            2 |      19.00 |        22.80 |           0 |
|       27 | 联通100元充值卡              |     15 |        0 | ecs000027 |            2 |      95.00 |       100.00 |           0 |
|       28 | 联通50元充值卡               |     15 |        0 | ecs000028 |            0 |      45.00 |        50.00 |           0 |
|       29 | 移动100元充值卡              |     14 |        0 | ecs000029 |            0 |      90.00 |         0.00 |           0 |
|       30 | 移动20元充值卡               |     14 |        0 | ecs000030 |            9 |      18.00 |        21.00 |           1 |
|       31 | 摩托罗拉e8                   |      3 |        2 | ecs000031 |            1 |    1337.00 |      1604.39 |           5 |
|       32 | 诺基亚n85                    |      3 |        1 | ecs000032 |            4 |    3010.00 |      3612.00 |           9 |
+----------+------------------------------+--------+----------+-----------+--------------+------------+--------------+-------------+
31 rows in set (0.00 sec)

mysql> select goods_id,goods_name,market_price-shop_price from goods;
+----------+------------------------------+-------------------------+
| goods_id | goods_name                   | market_price-shop_price |
+----------+------------------------------+-------------------------+
|        1 | kd876                        |                  277.60 |
|        4 | 诺基亚n85原装充电器          |                   11.60 |
|        3 | 诺基亚原装5800耳机           |                   13.60 |
|        5 | 索爱原装m2卡读卡器           |                    4.00 |
|        6 | 胜创kingmax内存卡            |                    8.40 |
|        7 | 诺基亚n85原装立体声耳机hs-82 |                   20.00 |
|        8 | 飞利浦9@9v                   |                   79.79 |
|        9 | 诺基亚e66                    |                  459.60 |
|       10 | 索爱c702c                    |                  265.60 |
|       11 | 索爱c702c                    |                -1300.00 |
|       12 | 摩托罗拉a810                 |                  196.60 |
|       13 | 诺基亚5320 xpressmusic       |                  262.20 |
|       14 | 诺基亚5800xm                 |                  525.00 |
|       15 | 摩托罗拉a810                 |                  157.60 |
|       16 | 恒基伟业g101                 |                  164.67 |
|       17 | 夏新n7                       |                  460.00 |
|       18 | 夏新t5                       |                  575.60 |
|       19 | 三星sgh-f258                 |                  171.60 |
|       20 | 三星bc01                     |                   56.00 |
|       21 | 金立 a30                     |                  400.00 |
|       22 | 多普达touch hd               |                 1199.80 |
|       23 | 诺基亚n96                    |                  740.00 |
|       24 | p806                         |                  400.00 |
|       25 | 小灵通/固话50元充值卡        |                    9.59 |
|       26 | 小灵通/固话20元充值卡        |                    3.80 |
|       27 | 联通100元充值卡              |                    5.00 |
|       28 | 联通50元充值卡               |                    5.00 |
|       29 | 移动100元充值卡              |                  -90.00 |
|       30 | 移动20元充值卡               |                    3.00 |
|       31 | 摩托罗拉e8                   |                  267.39 |
|       32 | 诺基亚n85                    |                  602.00 |
+----------+------------------------------+-------------------------+
31 rows in set (0.00 sec)

mysql> select select goods_id,goods_name,shop_price,market_price,market_price-shop_price from goods;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'select goods_id,goods_name,shop_price,market_price,market_price-shop_price from ' at line 1
mysql> select goods_id,goods_name,shop_price,market_price,market_price-shop_price from goods;
+----------+------------------------------+------------+--------------+-------------------------+
| goods_id | goods_name                   | shop_price | market_price | market_price-shop_price |
+----------+------------------------------+------------+--------------+-------------------------+
|        1 | kd876                        |    1388.00 |      1665.60 |                  277.60 |
|        4 | 诺基亚n85原装充电器          |      58.00 |        69.60 |                   11.60 |
|        3 | 诺基亚原装5800耳机           |      68.00 |        81.60 |                   13.60 |
|        5 | 索爱原装m2卡读卡器           |      20.00 |        24.00 |                    4.00 |
|        6 | 胜创kingmax内存卡            |      42.00 |        50.40 |                    8.40 |
|        7 | 诺基亚n85原装立体声耳机hs-82 |     100.00 |       120.00 |                   20.00 |
|        8 | 飞利浦9@9v                   |     399.00 |       478.79 |                   79.79 |
|        9 | 诺基亚e66                    |    2298.00 |      2757.60 |                  459.60 |
|       10 | 索爱c702c                    |    1328.00 |      1593.60 |                  265.60 |
|       11 | 索爱c702c                    |    1300.00 |         0.00 |                -1300.00 |
|       12 | 摩托罗拉a810                 |     983.00 |      1179.60 |                  196.60 |
|       13 | 诺基亚5320 xpressmusic       |    1311.00 |      1573.20 |                  262.20 |
|       14 | 诺基亚5800xm                 |    2625.00 |      3150.00 |                  525.00 |
|       15 | 摩托罗拉a810                 |     788.00 |       945.60 |                  157.60 |
|       16 | 恒基伟业g101                 |     823.33 |       988.00 |                  164.67 |
|       17 | 夏新n7                       |    2300.00 |      2760.00 |                  460.00 |
|       18 | 夏新t5                       |    2878.00 |      3453.60 |                  575.60 |
|       19 | 三星sgh-f258                 |     858.00 |      1029.60 |                  171.60 |
|       20 | 三星bc01                     |     280.00 |       336.00 |                   56.00 |
|       21 | 金立 a30                     |    2000.00 |      2400.00 |                  400.00 |
|       22 | 多普达touch hd               |    5999.00 |      7198.80 |                 1199.80 |
|       23 | 诺基亚n96                    |    3700.00 |      4440.00 |                  740.00 |
|       24 | p806                         |    2000.00 |      2400.00 |                  400.00 |
|       25 | 小灵通/固话50元充值卡        |      48.00 |        57.59 |                    9.59 |
|       26 | 小灵通/固话20元充值卡        |      19.00 |        22.80 |                    3.80 |
|       27 | 联通100元充值卡              |      95.00 |       100.00 |                    5.00 |
|       28 | 联通50元充值卡               |      45.00 |        50.00 |                    5.00 |
|       29 | 移动100元充值卡              |      90.00 |         0.00 |                  -90.00 |
|       30 | 移动20元充值卡               |      18.00 |        21.00 |                    3.00 |
|       31 | 摩托罗拉e8                   |    1337.00 |      1604.39 |                  267.39 |
|       32 | 诺基亚n85                    |    3010.00 |      3612.00 |                  602.00 |
+----------+------------------------------+------------+--------------+-------------------------+
31 rows in set (0.00 sec)

mysql> select * from user;
+-----+--------+-----+
| uid | name   | age |
+-----+--------+-----+
|   1 | 乔高建 |  25 |
|   2 | 迈克尔 |  19 |
|   3 | 张三   |  20 |
|   4 | 李四   |  21 |
|   5 | 王五   |  22 |
+-----+--------+-----+
5 rows in set (0.00 sec)

mysql> alter table user;
Query OK, 0 rows affected (0.00 sec)

mysql> alter table user
    -> add gender varchar(10) not null;
Query OK, 5 rows affected (0.03 sec)
Records: 5  Duplicates: 0  Warnings: 0

mysql> select * from user;
+-----+--------+-----+--------+
| uid | name   | age | gender |
+-----+--------+-----+--------+
|   1 | 乔高建 |  25 |        |
|   2 | 迈克尔 |  19 |        |
|   3 | 张三   |  20 |        |
|   4 | 李四   |  21 |        |
|   5 | 王五   |  22 |        |
+-----+--------+-----+--------+
5 rows in set (0.00 sec)

mysql> alter table user
    -> drop gender;
Query OK, 5 rows affected (0.03 sec)
Records: 5  Duplicates: 0  Warnings: 0

mysql> select * from user;
+-----+--------+-----+
| uid | name   | age |
+-----+--------+-----+
|   1 | 乔高建 |  25 |
|   2 | 迈克尔 |  19 |
|   3 | 张三   |  20 |
|   4 | 李四   |  21 |
|   5 | 王五   |  22 |
+-----+--------+-----+
5 rows in set (0.00 sec)

mysql> alter table user
    -> change uid id int primary key auto_increment;
ERROR 1068 (42000): Multiple primary key defined
mysql> change uid id int;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'uid id int' at line 1
mysql> desc user;
+-------+----------------------+------+-----+---------+----------------+
| Field | Type                 | Null | Key | Default | Extra          |
+-------+----------------------+------+-----+---------+----------------+
| uid   | int(11)              | NO   | PRI | NULL    | auto_increment |
| name  | varchar(20)          | NO   |     |         |                |
| age   | smallint(5) unsigned | NO   |     | 0       |                |
+-------+----------------------+------+-----+---------+----------------+
3 rows in set (0.01 sec)

mysql> change name id varchar(20);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'name
id varchar(20)' at line 1
mysql> alter table user change uid id int primary key auto_increment;
ERROR 1068 (42000): Multiple primary key defined
mysql> alter table user change name id varchar(20);
Query OK, 5 rows affected (0.02 sec)
Records: 5  Duplicates: 0  Warnings: 0

mysql> select * from user;
+-----+--------+-----+
| uid | id     | age |
+-----+--------+-----+
|   1 | 乔高建 |  25 |
|   2 | 迈克尔 |  19 |
|   3 | 张三   |  20 |
|   4 | 李四   |  21 |
|   5 | 王五   |  22 |
+-----+--------+-----+
5 rows in set (0.00 sec)

mysql> alter table user change id name varchar(20);
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> select * from user;
+-----+--------+-----+
| uid | name   | age |
+-----+--------+-----+
|   1 | 乔高建 |  25 |
|   2 | 迈克尔 |  19 |
|   3 | 张三   |  20 |
|   4 | 李四   |  21 |
|   5 | 王五   |  22 |
+-----+--------+-----+
5 rows in set (0.00 sec)

mysql> select * from user order by age;
+-----+--------+-----+
| uid | name   | age |
+-----+--------+-----+
|   2 | 迈克尔 |  19 |
|   3 | 张三   |  20 |
|   4 | 李四   |  21 |
|   5 | 王五   |  22 |
|   1 | 乔高建 |  25 |
+-----+--------+-----+
5 rows in set (0.00 sec)
```